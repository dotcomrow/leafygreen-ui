"use strict";(self.webpackChunkleafygreen_ui=self.webpackChunkleafygreen_ui||[]).push([[1731],{"./packages/menu/src/FocusableMenuItem/FocusableMenuItem.styles.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>getFocusableMenuItemWrapperStyles});var _templateObject,_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/menu/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),_leafygreen_ui_emotion__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/emotion/dist/esm/index.js"),_leafygreen_ui_tokens__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/tokens/dist/esm/index.js"),_styles__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/menu/src/styles.ts"),getFocusableMenuItemWrapperStyles=function getFocusableMenuItemWrapperStyles(theme){return(0,_leafygreen_ui_emotion__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject||(_templateObject=(0,_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_3__.Z)(["\n  padding: ","px;\n  cursor: unset;\n  background-color: ",";\n"])),_leafygreen_ui_tokens__WEBPACK_IMPORTED_MODULE_1__.W0[100],_styles__WEBPACK_IMPORTED_MODULE_2__.co[theme].background.default)}},"./packages/menu/src/Menu/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{v:()=>Menu_Menu});var esm_extends=__webpack_require__("./packages/menu/node_modules/@babel/runtime/helpers/esm/extends.js"),taggedTemplateLiteral=__webpack_require__("./packages/menu/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),defineProperty=__webpack_require__("./packages/menu/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),slicedToArray=__webpack_require__("./packages/menu/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),objectWithoutProperties=__webpack_require__("./packages/menu/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),index_js_=__webpack_require__("webpack/sharing/consume/default/react/react"),index_js_default=__webpack_require__.n(index_js_),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),esm=__webpack_require__("./packages/descendants/dist/esm/index.js"),dist_esm=__webpack_require__("./packages/emotion/dist/esm/index.js"),hooks_dist_esm=__webpack_require__("./packages/hooks/dist/esm/index.js"),leafygreen_provider_dist_esm=__webpack_require__("./packages/leafygreen-provider/dist/esm/index.js"),lib_dist_esm=__webpack_require__("./packages/lib/dist/esm/index.js"),popover_dist_esm=__webpack_require__("./packages/popover/dist/esm/index.js"),constants=__webpack_require__("./packages/menu/src/constants.ts");function getNextIndex(direction,currentIndex,totalItems){if(!(0,lib_dist_esm.$K)(currentIndex))return currentIndex;switch(direction){case"next":return(currentIndex+1)%totalItems;case"prev":return(currentIndex-1+totalItems)%totalItems;case"last":return totalItems-1;default:return 0}}var _templateObject,_templateObject2,_templateObject3,_templateObject4,Menu_templateObject,isDescendantsSet=function isDescendantsSet(descendants){return(0,lib_dist_esm.$K)(descendants)&&descendants.length>0},getNextFromDirection=function getNextFromDirection(direction,current,descendants){if(!isDescendantsSet(descendants))return current;var updatedIndex=function getNextEnabledIndex(direction,current,descendants){var _current$index;if(!descendants.every((function(d){return d.props.disabled}))){for(var updatedIndex=getNextIndex(direction,null!==(_current$index=null==current?void 0:current.index)&&void 0!==_current$index?_current$index:0,descendants.length),item=(0,esm.$X)(updatedIndex,descendants);null!==(_item=item)&&void 0!==_item&&_item.props.disabled;){var _item;item=descendants[updatedIndex=getNextIndex(function(){switch(direction){case"first":return"next";case"last":return"prev";default:return direction}}(),updatedIndex,descendants.length)]}return updatedIndex}}(direction,current,descendants);return(0,lib_dist_esm.$K)(updatedIndex)?(0,esm.$X)(updatedIndex,descendants):current},useHighlightReducer=function useHighlightReducer(getDescendants,onChange){var highlightReducerFunction=function makeHighlightReducerFunction(getDescendants){return function(currentHighlight,action){var descendants=getDescendants();return action.direction?getNextFromDirection(action.direction,currentHighlight,descendants)||currentHighlight:action.index?(0,esm.$X)(action.index,descendants):action.id?(0,esm.iN)(action.id,descendants):currentHighlight}}(getDescendants),_useReducer=(0,index_js_.useReducer)(highlightReducerFunction,function getInitialHighlight(descendants){return isDescendantsSet(descendants)?descendants[0]:void 0}(getDescendants())),_useReducer2=(0,slicedToArray.Z)(_useReducer,2),highlight=_useReducer2[0],dispatch=_useReducer2[1];return{highlight,moveHighlight:function moveHighlight(direction){var updatedHighlight=highlightReducerFunction(highlight,{direction});null==onChange||onChange(updatedHighlight),dispatch({direction})},setHighlight:function setHighlight(indexOrId){var action="string"==typeof indexOrId?{id:indexOrId}:{index:indexOrId},updatedHighlight=highlightReducerFunction(highlight,action);null==onChange||onChange(updatedHighlight),dispatch(action)}}},MenuContext=__webpack_require__("./packages/menu/src/MenuContext/MenuContext.tsx"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),polished_esm=__webpack_require__("./packages/menu/node_modules/polished/dist/polished.esm.js"),palette_dist_esm=__webpack_require__("./packages/palette/dist/esm/index.js"),tokens_dist_esm=__webpack_require__("./packages/tokens/dist/esm/index.js"),styles=__webpack_require__("./packages/menu/src/styles.ts"),getMenuStyles=function getMenuStyles(_ref){var theme=_ref.theme;return(0,dist_esm.css)(_templateObject||(_templateObject=(0,taggedTemplateLiteral.Z)(["\n    width: 210px;\n    border-radius: ","px;\n    overflow: auto;\n    // FIXME: Should this really be 14px?\n    padding: ","px 0;\n\n    background-color: ",";\n    border: 1px solid ",";\n\n    /* // Light mode only */\n    ","\n  "])),tokens_dist_esm.W0[300],tokens_dist_esm.W0[300]+tokens_dist_esm.W0[50],styles.co[theme].background.default,styles.co[theme].border.default,"light"===theme&&(0,dist_esm.css)(_templateObject2||(_templateObject2=(0,taggedTemplateLiteral.Z)(["\n      box-shadow: 0 2px 4px 1px ",";\n    "])),(0,polished_esm.DZ)(.85,palette_dist_esm.D.black)))},scrollContainerStyle=(0,dist_esm.css)(_templateObject3||(_templateObject3=(0,taggedTemplateLiteral.Z)(["\n  overflow: auto;\n  margin-block-start: 0px;\n  margin-block-end: 0px;\n  padding-inline-start: 0px;\n  padding: 0px;\n"]))),getDarkInLightModeMenuStyles=function getDarkInLightModeMenuStyles(){return(0,dist_esm.css)(_templateObject4||(_templateObject4=(0,taggedTemplateLiteral.Z)(["\n  box-shadow: unset;\n  background-color: ",";\n  border: 1px solid ",";\n"])),tokens_dist_esm.$_.dark.background.primary.default,tokens_dist_esm.$_.dark.border.primary.default)},_excluded=["align","justify","adjustOnMutation","shouldClose","spacing","maxHeight","usePortal","initialOpen","open","setOpen","darkMode","renderDarkMenu","children","className","refEl","trigger","portalClassName","portalContainer","portalRef","scrollContainer","popoverZIndex"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}var Menu=index_js_default().forwardRef((function Menu(_ref,forwardRef){var _ref$align=_ref.align,align=void 0===_ref$align?popover_dist_esm.xM.Bottom:_ref$align,_ref$justify=_ref.justify,justify=void 0===_ref$justify?popover_dist_esm.WD.End:_ref$justify,_ref$adjustOnMutation=_ref.adjustOnMutation,adjustOnMutation=void 0!==_ref$adjustOnMutation&&_ref$adjustOnMutation,_ref$shouldClose=_ref.shouldClose,shouldClose=void 0===_ref$shouldClose?function(){return!0}:_ref$shouldClose,_ref$spacing=_ref.spacing,spacing=void 0===_ref$spacing?6:_ref$spacing,_ref$maxHeight=_ref.maxHeight,maxHeight=void 0===_ref$maxHeight?344:_ref$maxHeight,_ref$usePortal=_ref.usePortal,usePortal=void 0===_ref$usePortal||_ref$usePortal,_ref$initialOpen=_ref.initialOpen,initialOpen=void 0!==_ref$initialOpen&&_ref$initialOpen,controlledOpen=_ref.open,controlledSetOpen=_ref.setOpen,darkModeProp=_ref.darkMode,_ref$renderDarkMenu=_ref.renderDarkMenu,renderDarkMenu=void 0===_ref$renderDarkMenu||_ref$renderDarkMenu,children=_ref.children,className=_ref.className,refEl=_ref.refEl,trigger=_ref.trigger,portalClassName=_ref.portalClassName,portalContainer=_ref.portalContainer,portalRef=_ref.portalRef,scrollContainer=_ref.scrollContainer,popoverZIndex=_ref.popoverZIndex,rest=(0,objectWithoutProperties.Z)(_ref,_excluded),_useDarkMode=(0,leafygreen_provider_dist_esm.vs)(darkModeProp),theme=_useDarkMode.theme,darkMode=_useDarkMode.darkMode,popoverRef=(0,index_js_.useRef)(null),triggerRef=(0,index_js_.useRef)(null),_useState=(0,index_js_.useState)(initialOpen),_useState2=(0,slicedToArray.Z)(_useState,2),uncontrolledOpen=_useState2[0],uncontrolledSetOpen=_useState2[1],setOpen="boolean"==typeof controlledOpen&&controlledSetOpen||uncontrolledSetOpen,open=null!=controlledOpen?controlledOpen:uncontrolledOpen,handleClose=(0,index_js_.useCallback)((function(){shouldClose()&&setOpen(!1)}),[setOpen,shouldClose]),maxMenuHeightValue=function useMenuHeight(_ref){var refEl=_ref.refEl,spacing=_ref.spacing,maxHeight=_ref.maxHeight,availableSpace=(0,hooks_dist_esm.Uu)(refEl,spacing),memoizedAvailableSpace=(0,index_js_.useMemo)((function(){return availableSpace}),[availableSpace]);return(0,lodash.isUndefined)(memoizedAvailableSpace)?"unset":"".concat(Math.min(memoizedAvailableSpace,maxHeight),"px")}({refEl:refEl||triggerRef,spacing,maxHeight});(0,hooks_dist_esm.Sj)(handleClose,[popoverRef,triggerRef],open);var _useInitDescendants=(0,esm.Ds)(),descendants=_useInitDescendants.descendants,dispatch=_useInitDescendants.dispatch,getDescendants=_useInitDescendants.getDescendants,_useHighlightReducer=useHighlightReducer(getDescendants,(function(_next){if((0,lib_dist_esm.$K)(_next)){var nextDescendant=(0,esm.iN)(_next.id,getDescendants()),descendantElement=null==nextDescendant?void 0:nextDescendant.ref.current;null==descendantElement||descendantElement.focus()}})),highlight=_useHighlightReducer.highlight,moveHighlight=_useHighlightReducer.moveHighlight,setHighlight=_useHighlightReducer.setHighlight;(0,hooks_dist_esm.OR)("keydown",(function handleKeyDown(e){var _ref2,_ref3;switch(e.key){case lib_dist_esm.Pc.ArrowDown:e.preventDefault(),moveHighlight("next");break;case lib_dist_esm.Pc.ArrowUp:e.preventDefault(),moveHighlight("prev");break;case lib_dist_esm.Pc.Tab:e.preventDefault(),handleClose(),null===(_ref2=refEl||triggerRef)||void 0===_ref2||null===(_ref2=_ref2.current)||void 0===_ref2||_ref2.focus();break;case lib_dist_esm.Pc.Escape:handleClose(),null===(_ref3=refEl||triggerRef)||void 0===_ref3||null===(_ref3=_ref3.current)||void 0===_ref3||_ref3.focus();break;case lib_dist_esm.Pc.Space:case lib_dist_esm.Pc.Enter:open||moveHighlight("first")}}),{enabled:open});var popoverProps=function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({popoverZIndex},usePortal?{spacing,usePortal,portalClassName,portalContainer,portalRef,scrollContainer}:{spacing,usePortal}),popoverContent=index_js_default().createElement(esm.nB,{context:MenuContext.k0,descendants,dispatch},index_js_default().createElement(MenuContext.pl.Provider,{value:{theme,darkMode,highlight,setHighlight,renderDarkMenu}},index_js_default().createElement(popover_dist_esm.ZP,(0,esm_extends.Z)({key:"popover",active:open,align,justify,refEl,adjustOnMutation,onEntered:function handlePopoverOpen(){moveHighlight("first")},"data-testid":constants.l.root,"data-lgid":constants.l.root},popoverProps),index_js_default().createElement("div",{"data-theme":theme,className:(0,dist_esm.cx)(getMenuStyles({theme}),(0,dist_esm.css)(Menu_templateObject||(Menu_templateObject=(0,taggedTemplateLiteral.Z)(["\n                max-height: ",";\n              "])),maxMenuHeightValue),(0,defineProperty.Z)({},getDarkInLightModeMenuStyles(),theme===lib_dist_esm.Q2.Light&&renderDarkMenu),className),ref:forwardRef},index_js_default().createElement("ul",(0,esm_extends.Z)({},rest,{className:scrollContainerStyle,role:"menu",onClick:function onClick(e){return e.stopPropagation()},ref:popoverRef}),children)))));if(trigger){var _React$cloneElement,_trigger,triggerClickHandler=function triggerClickHandler(event){var _event$nativeEvent,_event$nativeEvent$st,_trigger$props,_trigger$props$onClic;(null==event||event.preventDefault(),setOpen((function(curr){return!curr})),trigger&&"function"!=typeof trigger)&&(null===(_trigger$props=trigger.props)||void 0===_trigger$props||null===(_trigger$props$onClic=_trigger$props.onClick)||void 0===_trigger$props$onClic||_trigger$props$onClic.call(_trigger$props,event));null==event||null===(_event$nativeEvent=event.nativeEvent)||void 0===_event$nativeEvent||null===(_event$nativeEvent$st=_event$nativeEvent.stopPropagation)||void 0===_event$nativeEvent$st||_event$nativeEvent$st.call(_event$nativeEvent)};return"function"==typeof trigger?trigger((_trigger={onClick:triggerClickHandler,ref:triggerRef,children:popoverContent},(0,defineProperty.Z)(_trigger,"aria-expanded",open),(0,defineProperty.Z)(_trigger,"aria-haspopup",!0),_trigger)):index_js_default().cloneElement(trigger,(_React$cloneElement={ref:triggerRef,onClick:triggerClickHandler,children:index_js_default().createElement(index_js_default().Fragment,null,trigger.props.children,popoverContent)},(0,defineProperty.Z)(_React$cloneElement,"aria-expanded",open),(0,defineProperty.Z)(_React$cloneElement,"aria-haspopup",!0),_React$cloneElement))}return popoverContent}));Menu.displayName="Menu",Menu.propTypes={children:prop_types_default().node,className:prop_types_default().string,align:prop_types_default().oneOf(Object.values(popover_dist_esm.xM)),justify:prop_types_default().oneOf(Object.values(popover_dist_esm.WD)),refEl:prop_types_default().shape({current:"undefined"!=typeof window?prop_types_default().instanceOf(Element):prop_types_default().any}),portalRef:prop_types_default().shape({current:"undefined"!=typeof window?prop_types_default().instanceOf(Element):prop_types_default().any}),usePortal:prop_types_default().bool,trigger:prop_types_default().oneOfType([prop_types_default().node,prop_types_default().func]),open:prop_types_default().bool,setOpen:prop_types_default().func,darkMode:prop_types_default().bool};const Menu_Menu=Menu}}]);